<!DOCTYPE html>
<html>
    <head>
        <title>Tic-Tac-Toe</title>
        <style>

            .sidebar{
                position: fixed;
                top: 50px;
            }

            .avatar{
                font-size: 50px;
                margin-top: 20px;
                cursor: pointer;
            }

            .main{
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                gap: 50px;
            }

            .playerChoice{
                display: flex;
                gap: 50px;
            }

            .instruction{
                width: 500px;
                font-size: 30px;
            }

            .next{
                display: none;
                background-color: whitesmoke;
                height: 50px;
                width: 100px;
                font-size: larger;
            }

            .game-container{
                display: none;
            }

            .game{
                display: flex;
                flex-direction: column;
                gap: 30px;
                justify-content: center;
                align-items: center;
            }

            p{
                font-size: 60px;
                margin: 0;
            }

            .container{
                display: grid;
                grid-template-columns: 100px 100px 100px;
                gap: 10px;
                margin: 0;
            }

            .smallcontainer{
                position: static;
                background-color: aqua;
                height: 100px;
                width: 100px;
                text-align: center;
                box-shadow: 10px 10px 10px gray;
                font-size: 60px;
            }

            .smallcontainer:hover{
                opacity: 0.8;
            }

            .reset{
                height: 40px;
                width: 100px;
                cursor: pointer;
                background-color: rgb(254, 90, 90);
                box-shadow: -10px 5px 10px rgb(99, 99, 99);
                margin: 0;
            }

            .reset:active{
                box-shadow: none;
                margin-left: -10px;
            }

            .nopointer{
                pointer-events: none;
            }

        </style>
    </head>

    <body>

        <sidebar class="sidebar">
            <div class="avatar">üòé</div>
            <div class="avatar">üòÅ</div>
            <div class="avatar">üòò</div>
            <div class="avatar">ü§°</div>
            <div class="avatar">üíÄ</div>
            <div class="avatar">üòà</div>
        </sidebar>

        <div class="main">
            <div class="playerChoice">
                <h1>Player 1: <span class="player"></span></h1>
                <h1>Player 2: <span class="player"></span></h1>
            </div>

            <p class="instruction">Choose avatar from the given list !!</p>

            <button class="next" onclick="nextClick()">Next</button>
    
            <div class="game-container">
                <div class="game">
    
                    <p class="name">Tic-Tac-Toe</p>
                
                    <div class="container">
                        <div class="smallcontainer" data-position="[0,0]"></div>
                        <div class="smallcontainer" data-position="[0,1]"></div>
                        <div class="smallcontainer" data-position="[0,2]"></div>
                        <div class="smallcontainer" data-position="[1,0]"></div>
                        <div class="smallcontainer" data-position="[1,1]"></div>
                        <div class="smallcontainer" data-position="[1,2]"></div>
                        <div class="smallcontainer" data-position="[2,0]"></div>
                        <div class="smallcontainer" data-position="[2,1]"></div>
                        <div class="smallcontainer" data-position="[2,2]"></div>
                    </div>
            
                    <button class="reset" onclick="reset()">Reset</button>
                </div>
            </div>
        </div>
        
        <script>
            const moves =[[],[],[]];
            let i=0;
            const playerAvatar =[];
            let playerOne , playerTwo;

            const playerChoice = document.querySelectorAll('.player');

            document.querySelectorAll('.avatar').forEach((char)=>{
                char.addEventListener('click',()=>{
                    if(i<2){
                        const avatar = char.innerText
                        playerChoice[i].innerText = avatar;
                        playerAvatar.push(avatar)
                        char.remove();
                        i++;
                    }
                    if(i==2){
                        document.querySelector('.instruction').style.display = 'none';
                        document.querySelector('.sidebar').style.display = 'none';
                        document.querySelector('.next').style.display = 'block';
                    }
                })
            })

            function nextClick(){
                [playerOne,playerTwo] = playerAvatar;
                console.log(playerOne,playerTwo);
                document.querySelector('.next').style.display = 'none';
                document.querySelector('.game-container').style.display = 'block';
                playerMove = playerOne;
            }

            document.querySelectorAll('.smallcontainer').forEach((box) => {
                box.addEventListener('click',() =>{
                    box.innerHTML = playerMove;
                    if(playerMove === playerOne){
                        box.style.backgroundColor = 'red';
                    } else{
                        box.style.backgroundColor = 'yellow';
                    }
                    const [a,b] = JSON.parse(box.dataset.position);
                    moves[a][b] = playerMove;
                    box.classList.add('nopointer');

                    if(
                    moves[0][0] === playerMove && moves[0][1] === playerMove && moves[0][2] === playerMove || 
                    moves[1][0] === playerMove && moves[1][1] === playerMove && moves[1][2] === playerMove ||
                    moves[2][0] === playerMove && moves[2][1] === playerMove && moves[2][2] === playerMove ||
                    moves[0][0] === playerMove && moves[1][0] === playerMove && moves[2][0] === playerMove ||
                    moves[0][1] === playerMove && moves[1][1] === playerMove && moves[2][1] === playerMove ||
                    moves[0][2] === playerMove && moves[1][2] === playerMove && moves[2][2] === playerMove ||
                    moves[0][0] === playerMove && moves[1][1] === playerMove && moves[2][2] === playerMove ||
                    moves[0][2] === playerMove && moves[1][1] === playerMove && moves[2][0] === playerMove
                    ){
                        alert(`${playerMove} won the game.`)
                        document.querySelector('.container').classList.add('nopointer')
                    }

                    if(playerMove === playerOne){
                        playerMove = playerTwo;
                    } else{
                        playerMove = playerOne;
                }
                })
            })

            function reset(){
                document.querySelector('.container').classList.remove('nopointer');

                document.querySelectorAll('.smallcontainer').forEach((box) => {
                    box.innerText = '';
                    box.style.backgroundColor = 'cyan';
                    box.classList.remove('nopointer');
                })

                playerMove = playerOne;

                moves.splice(0,3,[],[],[]);
            }

        </script>
    </body>
</html>